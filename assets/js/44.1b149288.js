(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{429:function(s,t,a){"use strict";a.r(t);var e=a(2),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("前言")]),s._v(" "),a("p",[s._v("本篇是 Liunx 的学习笔记系列第七篇, 在 Liunx 中文件除了 rwx 权限, 还存在 SetUID 、 SetGID 、 Sicky BIT 特殊权限, 本篇就是来介绍这些特殊权限")])]),s._v(" "),a("h2",{attrs:{id:"setuid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setuid"}},[s._v("#")]),s._v(" SetUID")]),s._v(" "),a("h3",{attrs:{id:"针对文件的作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#针对文件的作用"}},[s._v("#")]),s._v(" 针对文件的作用")]),s._v(" "),a("ul",[a("li",[s._v("只有可以执行的二进制程序才能设定 SUID 权限")]),s._v(" "),a("li",[s._v("命令执行者要对该程序用于 x（执行）权限")]),s._v(" "),a("li",[s._v("命令执行者在执行该程序是获得该程序文件属主的身份（在执行程序的过程中灵魂附体成文件的属主）")]),s._v(" "),a("li",[s._v("SetUID 权限只在该程序执行过程中有效, 也就是说身份改变只在程序执行过程中有效")])]),s._v(" "),a("h3",{attrs:{id:"概念图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概念图"}},[s._v("#")]),s._v(" 概念图")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://oss-blog.test.upcdn.net/setuid-1.png",alt:"SetUID"}})]),s._v(" "),a("h3",{attrs:{id:"设置-suid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置-suid"}},[s._v("#")]),s._v(" 设置 SUID")]),s._v(" "),a("p",[s._v("只能针对二进制可执行文件")]),s._v(" "),a("h4",{attrs:{id:"_4-代表-suid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-代表-suid"}},[s._v("#")]),s._v(" 4 代表 SUID")]),s._v(" "),a("p",[a("code",[s._v("Command Format:")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4777")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("fileName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置 SUID 权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("644")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("fileName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消 SUID 权限")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("当然还可以用以下命令设置, "),a("code",[s._v("Command Format:")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" u+s "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("fileName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置 SUID 权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" u-s "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("fileName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消 SUID 权限")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"s-与-s-的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#s-与-s-的区别"}},[s._v("#")]),s._v(" S 与 s 的区别")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("区别")]),s._v(" "),a("p",[s._v("大写 "),a("code",[s._v("S")]),s._v(" 其实是报错, 因为我们用来测试的文件并非二进制文件, 或者说是可执行程序, 只需添加 x 权限即可变为小写 "),a("code",[s._v("s")]),s._v(" , 实际上生效的是小写 "),a("code",[s._v("s")])])]),s._v(" "),a("p",[a("code",[s._v("For Examlpe:")]),s._v(" "),a("br")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://oss-blog.test.upcdn.net/setuid-2.png",alt:"SetUID"}})]),s._v(" "),a("h3",{attrs:{id:"危险的-setuid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#危险的-setuid"}},[s._v("#")]),s._v(" 危险的 SetUID")]),s._v(" "),a("ul",[a("li",[s._v("关键目录应严格控制写权限。比如 "),a("code",[s._v("“/”")]),s._v(" 、 "),a("code",[s._v("”/usr“")]),s._v(" 等")]),s._v(" "),a("li",[s._v("用户的密码设置要严格遵守密码三原则")]),s._v(" "),a("li",[s._v("对系统中默认应该具有 SetUID 权限的文件作一列表, 定时检查没有这个之外的文件是否被设置了 SetUID 权限")])]),s._v(" "),a("h2",{attrs:{id:"setgid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#setgid"}},[s._v("#")]),s._v(" SetGID")]),s._v(" "),a("p",[s._v("既可以针对二进制可执行文件, 也可以针对目录")]),s._v(" "),a("h3",{attrs:{id:"针对文件的作用-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#针对文件的作用-2"}},[s._v("#")]),s._v(" 针对文件的作用")]),s._v(" "),a("ul",[a("li",[s._v("只有可以执行的二进制程序才能设定 SGID 权限")]),s._v(" "),a("li",[s._v("命令执行者要对该程序用于 x（执行）权限")]),s._v(" "),a("li",[s._v("命令执行者在执行该程序的时候, 组身份升级为该程序的属组")]),s._v(" "),a("li",[s._v("SetUID 权限同样只在该程序执行过程中有效, 也就是说组身份改变只在程序执行过成中有效")])]),s._v(" "),a("h3",{attrs:{id:"针对目录的作用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#针对目录的作用"}},[s._v("#")]),s._v(" 针对目录的作用")]),s._v(" "),a("ul",[a("li",[s._v("普通用户必须对此目录拥有 r 和 x 权限, 才能进入此目录")]),s._v(" "),a("li",[s._v("普通用户在此目录中的有效组会变成此目录的属组")]),s._v(" "),a("li",[s._v("若普通用户对此目录拥有 w 权限时, 新建的文件的默认属组是这个目录的属组")])]),s._v(" "),a("h3",{attrs:{id:"设置-sgid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置-sgid"}},[s._v("#")]),s._v(" 设置 SGID")]),s._v(" "),a("h4",{attrs:{id:"_2-代表-sgid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-代表-sgid"}},[s._v("#")]),s._v(" 2 代表 SGID")]),s._v(" "),a("p",[a("code",[s._v("Command Format:")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2777")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("fileName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置 SGID 权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("644")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("fileName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消 SGID 权限")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("当然还可以用以下命令设置, "),a("code",[s._v("Command Format:")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" g+s "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("fileName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置 SGID 权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" g-s "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("fileName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消 SGID 权限")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"s-与-s-的区别-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#s-与-s-的区别-2"}},[s._v("#")]),s._v(" S 与 s 的区别")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("区别")]),s._v(" "),a("p",[s._v("大写 S 其实是报错, 因为我们用来测试的文件并非二进制文件, 或者说是可执行程序, 只需添加 x 权限即可变为小写 s")])]),s._v(" "),a("p",[a("code",[s._v("For Examlpe:")]),s._v(" "),a("br")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://oss-blog.test.upcdn.net/setgid.png",alt:"SetUID"}})]),s._v(" "),a("h2",{attrs:{id:"sicky-bit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sicky-bit"}},[s._v("#")]),s._v(" Sicky BIT")]),s._v(" "),a("p",[s._v("只能针对目录")]),s._v(" "),a("h3",{attrs:{id:"针对目录的作用-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#针对目录的作用-2"}},[s._v("#")]),s._v(" 针对目录的作用")]),s._v(" "),a("h3",{attrs:{id:"设置-sbit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置-sbit"}},[s._v("#")]),s._v(" 设置 SBIT")]),s._v(" "),a("ul",[a("li",[s._v("粘着位目前对目录有效")]),s._v(" "),a("li",[s._v("普通用户对该目录拥有 w 和 x 权限, 即普通用户可以在此目录拥有写入权限")]),s._v(" "),a("li",[s._v("如果没有粘着位, 因为普通用户拥有 w 权限, 所以可以删除此目录下所有文件, 包括其他用户建立的文件。一但赋予粘着位, 除了 root 可以删除所有文件, 普通用户就算拥有 w 权限, 也只能删除自己建立的文件, 但是不能删除其他用户建立的文件")])]),s._v(" "),a("h4",{attrs:{id:"_1-代表-sbit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-代表-sbit"}},[s._v("#")]),s._v(" 1 代表 SBIT")]),s._v(" "),a("p",[a("code",[s._v("Command Format:")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1777")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("folderName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置 SBIT 权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("644")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("folderName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消 SBIT 权限")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("当然还可以用以下命令设置, "),a("code",[s._v("Command Format:")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" o+s "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("folderName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 设置 SBIT 权限")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" o-t "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("folderName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消 SBIT 权限")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h4",{attrs:{id:"举例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#举例"}},[s._v("#")]),s._v(" 举例")]),s._v(" "),a("p",[a("code",[s._v("For Examlpe:")]),s._v(" "),a("br")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://oss-blog.test.upcdn.net/sticky-bit.png",alt:"SetUID"}})])])}),[],!1,null,null,null);t.default=n.exports}}]);